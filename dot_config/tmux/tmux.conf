# vim:set ft=tmux:

set-option -g default-shell /usr/bin/bash

set-window-option -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'wl-copy'
bind -T copy-mode-vi Escape send-keys -X cancel
bind -T copy-mode-vi C-c send-keys -X clear-selection

tmux_dir="~/.config/tmux"
tmux_data_dir="~/.tmux/data"
tmux_conf_dir="$tmux_dir/conf"
tmux_plugins_dir="$tmux_data_dir/plugins"

################################## CONF FILES ##################################
source "$tmux_conf_dir/opts.conf"
source "$tmux_conf_dir/keybind.conf"
source "$tmux_conf_dir/skin.conf"

#################################### PLUGINS ###################################
set-environment -g TMUX_PLUGIN_MANAGER_PATH "$tmux_plugins_dir"

# Tmux Plugin Manager
set -g @plugin "tmux-plugins/tpm"

# Selected Plugins
set -g @plugin "joshmedeski/sesh"                   # Session manager
set -g @plugin "sainnhe/tmux-fzf"                   # Fzf tmux goodies
set -g @plugin "NHDaly/tmux-better-mouse-mode"      # A better support for the mouse
set -g @plugin 'MunifTanjim/tmux-mode-indicator'    # Display current tmux model
set -g @plugin "alexwforsythe/tmux-which-key"       # Select actions from a popup menu
set -g @plugin 'tmux-plugins/tmux-open'             # Open links from tmux - Select path and press o
set -g @plugin 'tmux-plugins/tmux-yank'             # Copy to system clipboard
set -g @plugin 'tmux-plugins/tmux-resurrect'        # Restore tmux sessions
set -g @plugin 'tmux-plugins/tmux-continuum'        # Continuous saving the tmux env - WARN: must be the last

# Plugins configs
set -g @yank_with_mouse on                          # Just select with the mouse to copy
set -g @resurrect-dir "$tmux_data_dir/resurrect"
set -g @resurrect-save 'S'
set -g @resurrect-restore 'R'
set -g @resurrect-restore 'off'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run "~/.tmux/plugins/tpm/tpm"
